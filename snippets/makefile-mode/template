# key: template
# name: template
# expand-env: ((yas-indent-line 'fixed) (yas-wrap-around-region 'nil))
# --
SHELL := bash
.SHELLFLAGS := -ceuo pipefail
.ONESHELL:
# .SILENT:

BUILD := _build
\${BUILD}:
	mkdir -p \$@

.PHONY: start
INPUTS := replique.docx reponse.docx requete.docx
START := \$(patsubst %.docx,%.md,\${INPUTS})
start: \${START}
%.md: %.docx | \${BUILD}
	path="\$<"
	path_wo_ext="\$\${path%.*}"
	pandoc -t markdown_strict "\$\${path}" -o "\${BUILD}/\$\${path_wo_ext}.md"

.PHONY: clean
clean:
	rm -rvf \${BUILD}
